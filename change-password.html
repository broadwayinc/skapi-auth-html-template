<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>

<script src="service.js"></script>
<script>
    skapi.getProfile().then(user => {
        if (!user) {
            location.href = 'index.html';
        }
    });
</script>


<main>
    <a href="update-profile.html">Back</a>

    <h1>Change Password</h1>

    <form action='update-profile.html' onsubmit="
        skapi.changePassword(event).then(()=>alert('Password has been changed.')).catch(err=>alert(err.message));
    ">
        <table>
            <tr>
                <td>
                    Current Password
                </td>
                <td>
                    <input type="password" name="current_password" placeholder="At least 6 characters">
                </td>
            </tr>
            <tr>
                <td>
                    New Password
                </td>
                <td>
                    <input type="password" name="new_password" placeholder="At least 6 characters">
                </td>
            </tr>
            <tr>
                <td></td>
                <td style="text-align: right;">
                    <br>
                    <input type="submit" value="Change">
                </td>
            </tr>
        </table>
    </form>
</main>